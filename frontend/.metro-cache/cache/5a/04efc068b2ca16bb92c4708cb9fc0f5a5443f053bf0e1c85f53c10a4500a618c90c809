{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":91,"index":91}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../utils/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":92},"end":{"line":2,"column":31,"index":123}}],"key":"XoJ+jbKCrEi38eKczMqtlbk+TCk=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/InsightsContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useInsights\", {\n    enumerable: true,\n    get: function () {\n      return useInsights;\n    }\n  });\n  Object.defineProperty(exports, \"InsightsProvider\", {\n    enumerable: true,\n    get: function () {\n      return InsightsProvider;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _utilsApi = require(_dependencyMap[1], \"../utils/api\");\n  var api = _interopDefault(_utilsApi);\n  var _reactJsxDevRuntime = require(_dependencyMap[2], \"react/jsx-dev-runtime\");\n  const InsightsContext = /*#__PURE__*/(0, _react.createContext)({\n    insightsCount: 0,\n    criticalCount: 0,\n    lowStockCount: 0,\n    debtCount: 0,\n    refreshInsights: async () => {},\n    loading: false\n  });\n  const useInsights = () => (0, _react.useContext)(InsightsContext);\n  const InsightsProvider = ({\n    children\n  }) => {\n    const [insightsCount, setInsightsCount] = (0, _react.useState)(0);\n    const [criticalCount, setCriticalCount] = (0, _react.useState)(0);\n    const [lowStockCount, setLowStockCount] = (0, _react.useState)(0);\n    const [debtCount, setDebtCount] = (0, _react.useState)(0);\n    const [loading, setLoading] = (0, _react.useState)(false);\n    const refreshInsights = (0, _react.useCallback)(async () => {\n      try {\n        setLoading(true);\n        const response = await api.default.get('/api/ai/all-insights');\n        const insights = response.data.insights || [];\n\n        // Contar por tipo\n        let critical = 0;\n        let lowStock = 0;\n        let debt = 0;\n        insights.forEach(insight => {\n          if (insight.type === 'critical_stock') {\n            critical++;\n          } else if (insight.type === 'low_stock') {\n            lowStock++;\n          } else if (insight.type === 'overdue_debt') {\n            debt++;\n          }\n        });\n        setCriticalCount(critical);\n        setLowStockCount(lowStock);\n        setDebtCount(debt);\n        setInsightsCount(insights.length);\n      } catch (error) {\n        console.error('Error fetching insights count:', error);\n      } finally {\n        setLoading(false);\n      }\n    }, []);\n\n    // Cargar al montar\n    (0, _react.useEffect)(() => {\n      refreshInsights();\n\n      // Refrescar cada 60 segundos\n      const interval = setInterval(refreshInsights, 60000);\n      return () => clearInterval(interval);\n    }, [refreshInsights]);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(InsightsContext.Provider, {\n      value: {\n        insightsCount,\n        criticalCount,\n        lowStockCount,\n        debtCount,\n        refreshInsights,\n        loading\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }, this);\n  };\n});","lineCount":100,"map":[[13,2,22,0,"Object"],[13,8,22,0],[13,9,22,0,"defineProperty"],[13,23,22,0],[13,24,22,0,"exports"],[13,31,22,0],[14,4,22,0,"enumerable"],[14,14,22,0],[15,4,22,0,"get"],[15,7,22,0],[15,18,22,0,"get"],[15,19,22,0],[16,6,22,0],[16,13,22,0,"useInsights"],[16,24,22,0],[17,4,22,0],[18,2,22,0],[19,2,24,0,"Object"],[19,8,24,0],[19,9,24,0,"defineProperty"],[19,23,24,0],[19,24,24,0,"exports"],[19,31,24,0],[20,4,24,0,"enumerable"],[20,14,24,0],[21,4,24,0,"get"],[21,7,24,0],[21,18,24,0,"get"],[21,19,24,0],[22,6,24,0],[22,13,24,0,"InsightsProvider"],[22,29,24,0],[23,4,24,0],[24,2,24,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,2,0],[26,6,2,0,"_utilsApi"],[26,15,2,0],[26,18,2,0,"require"],[26,25,2,0],[26,26,2,0,"_dependencyMap"],[26,40,2,0],[27,2,2,0],[27,6,2,0,"api"],[27,9,2,0],[27,12,2,0,"_interopDefault"],[27,27,2,0],[27,28,2,0,"_utilsApi"],[27,37,2,0],[28,2,2,31],[28,6,2,31,"_reactJsxDevRuntime"],[28,25,2,31],[28,28,2,31,"require"],[28,35,2,31],[28,36,2,31,"_dependencyMap"],[28,50,2,31],[29,2,13,0],[29,8,13,6,"InsightsContext"],[29,23,13,21],[29,39,13,24],[29,43,13,24,"createContext"],[29,49,13,37],[29,50,13,37,"createContext"],[29,63,13,37],[29,65,13,59],[30,4,14,2,"insightsCount"],[30,17,14,15],[30,19,14,17],[30,20,14,18],[31,4,15,2,"criticalCount"],[31,17,15,15],[31,19,15,17],[31,20,15,18],[32,4,16,2,"lowStockCount"],[32,17,16,15],[32,19,16,17],[32,20,16,18],[33,4,17,2,"debtCount"],[33,13,17,11],[33,15,17,13],[33,16,17,14],[34,4,18,2,"refreshInsights"],[34,19,18,17],[34,21,18,19],[34,27,18,19,"refreshInsights"],[34,28,18,19],[34,33,18,31],[34,34,18,32],[34,35,18,33],[35,4,19,2,"loading"],[35,11,19,9],[35,13,19,11],[36,2,20,0],[36,3,20,1],[36,4,20,2],[37,2,22,7],[37,8,22,13,"useInsights"],[37,19,22,24],[37,22,22,27,"useInsights"],[37,23,22,27],[37,28,22,33],[37,32,22,33,"useContext"],[37,38,22,43],[37,39,22,43,"useContext"],[37,49,22,43],[37,51,22,44,"InsightsContext"],[37,66,22,59],[37,67,22,60],[38,2,24,7],[38,8,24,13,"InsightsProvider"],[38,24,24,70],[38,27,24,73,"InsightsProvider"],[38,28,24,74],[39,4,24,76,"children"],[40,2,24,85],[40,3,24,86],[40,8,24,91],[41,4,25,2],[41,10,25,8],[41,11,25,9,"insightsCount"],[41,24,25,22],[41,26,25,24,"setInsightsCount"],[41,42,25,40],[41,43,25,41],[41,46,25,44],[41,50,25,44,"useState"],[41,56,25,52],[41,57,25,52,"useState"],[41,65,25,52],[41,67,25,53],[41,68,25,54],[41,69,25,55],[42,4,26,2],[42,10,26,8],[42,11,26,9,"criticalCount"],[42,24,26,22],[42,26,26,24,"setCriticalCount"],[42,42,26,40],[42,43,26,41],[42,46,26,44],[42,50,26,44,"useState"],[42,56,26,52],[42,57,26,52,"useState"],[42,65,26,52],[42,67,26,53],[42,68,26,54],[42,69,26,55],[43,4,27,2],[43,10,27,8],[43,11,27,9,"lowStockCount"],[43,24,27,22],[43,26,27,24,"setLowStockCount"],[43,42,27,40],[43,43,27,41],[43,46,27,44],[43,50,27,44,"useState"],[43,56,27,52],[43,57,27,52,"useState"],[43,65,27,52],[43,67,27,53],[43,68,27,54],[43,69,27,55],[44,4,28,2],[44,10,28,8],[44,11,28,9,"debtCount"],[44,20,28,18],[44,22,28,20,"setDebtCount"],[44,34,28,32],[44,35,28,33],[44,38,28,36],[44,42,28,36,"useState"],[44,48,28,44],[44,49,28,44,"useState"],[44,57,28,44],[44,59,28,45],[44,60,28,46],[44,61,28,47],[45,4,29,2],[45,10,29,8],[45,11,29,9,"loading"],[45,18,29,16],[45,20,29,18,"setLoading"],[45,30,29,28],[45,31,29,29],[45,34,29,32],[45,38,29,32,"useState"],[45,44,29,40],[45,45,29,40,"useState"],[45,53,29,40],[45,55,29,41],[45,60,29,46],[45,61,29,47],[46,4,31,2],[46,10,31,8,"refreshInsights"],[46,25,31,23],[46,28,31,26],[46,32,31,26,"useCallback"],[46,38,31,37],[46,39,31,37,"useCallback"],[46,50,31,37],[46,52,31,38],[46,64,31,50],[47,6,32,4],[47,10,32,8],[48,8,33,6,"setLoading"],[48,18,33,16],[48,19,33,17],[48,23,33,21],[48,24,33,22],[49,8,34,6],[49,14,34,12,"response"],[49,22,34,20],[49,25,34,23],[49,31,34,29,"api"],[49,34,34,32],[49,35,34,32,"default"],[49,42,34,32],[49,43,34,33,"get"],[49,46,34,36],[49,47,34,37],[49,69,34,59],[49,70,34,60],[50,8,35,6],[50,14,35,12,"insights"],[50,22,35,20],[50,25,35,23,"response"],[50,33,35,31],[50,34,35,32,"data"],[50,38,35,36],[50,39,35,37,"insights"],[50,47,35,45],[50,51,35,49],[50,53,35,51],[52,8,37,6],[53,8,38,6],[53,12,38,10,"critical"],[53,20,38,18],[53,23,38,21],[53,24,38,22],[54,8,39,6],[54,12,39,10,"lowStock"],[54,20,39,18],[54,23,39,21],[54,24,39,22],[55,8,40,6],[55,12,40,10,"debt"],[55,16,40,14],[55,19,40,17],[55,20,40,18],[56,8,42,6,"insights"],[56,16,42,14],[56,17,42,15,"forEach"],[56,24,42,22],[56,25,42,24,"insight"],[56,32,42,36],[56,36,42,41],[57,10,43,8],[57,14,43,12,"insight"],[57,21,43,19],[57,22,43,20,"type"],[57,26,43,24],[57,31,43,29],[57,47,43,45],[57,49,43,47],[58,12,44,10,"critical"],[58,20,44,18],[58,22,44,20],[59,10,45,8],[59,11,45,9],[59,17,45,15],[59,21,45,19,"insight"],[59,28,45,26],[59,29,45,27,"type"],[59,33,45,31],[59,38,45,36],[59,49,45,47],[59,51,45,49],[60,12,46,10,"lowStock"],[60,20,46,18],[60,22,46,20],[61,10,47,8],[61,11,47,9],[61,17,47,15],[61,21,47,19,"insight"],[61,28,47,26],[61,29,47,27,"type"],[61,33,47,31],[61,38,47,36],[61,52,47,50],[61,54,47,52],[62,12,48,10,"debt"],[62,16,48,14],[62,18,48,16],[63,10,49,8],[64,8,50,6],[64,9,50,7],[64,10,50,8],[65,8,52,6,"setCriticalCount"],[65,24,52,22],[65,25,52,23,"critical"],[65,33,52,31],[65,34,52,32],[66,8,53,6,"setLowStockCount"],[66,24,53,22],[66,25,53,23,"lowStock"],[66,33,53,31],[66,34,53,32],[67,8,54,6,"setDebtCount"],[67,20,54,18],[67,21,54,19,"debt"],[67,25,54,23],[67,26,54,24],[68,8,55,6,"setInsightsCount"],[68,24,55,22],[68,25,55,23,"insights"],[68,33,55,31],[68,34,55,32,"length"],[68,40,55,38],[68,41,55,39],[69,6,56,4],[69,7,56,5],[69,8,56,6],[69,15,56,13,"error"],[69,20,56,18],[69,22,56,20],[70,8,57,6,"console"],[70,15,57,13],[70,16,57,14,"error"],[70,21,57,19],[70,22,57,20],[70,54,57,52],[70,56,57,54,"error"],[70,61,57,59],[70,62,57,60],[71,6,58,4],[71,7,58,5],[71,16,58,14],[72,8,59,6,"setLoading"],[72,18,59,16],[72,19,59,17],[72,24,59,22],[72,25,59,23],[73,6,60,4],[74,4,61,2],[74,5,61,3],[74,7,61,5],[74,9,61,7],[74,10,61,8],[76,4,63,2],[77,4,64,2],[77,8,64,2,"useEffect"],[77,14,64,11],[77,15,64,11,"useEffect"],[77,24,64,11],[77,26,64,12],[77,32,64,18],[78,6,65,4,"refreshInsights"],[78,21,65,19],[78,22,65,20],[78,23,65,21],[80,6,67,4],[81,6,68,4],[81,12,68,10,"interval"],[81,20,68,18],[81,23,68,21,"setInterval"],[81,34,68,32],[81,35,68,33,"refreshInsights"],[81,50,68,48],[81,52,68,50],[81,57,68,55],[81,58,68,56],[82,6,69,4],[82,13,69,11],[82,19,69,17,"clearInterval"],[82,32,69,30],[82,33,69,31,"interval"],[82,41,69,39],[82,42,69,40],[83,4,70,2],[83,5,70,3],[83,7,70,5],[83,8,70,6,"refreshInsights"],[83,23,70,21],[83,24,70,22],[83,25,70,23],[84,4,72,2],[84,24,73,4],[84,28,73,4,"_reactJsxDevRuntime"],[84,47,73,4],[84,48,73,4,"jsxDEV"],[84,54,73,4],[84,56,73,5,"InsightsContext"],[84,71,73,20],[84,72,73,21,"Provider"],[84,80,73,29],[85,6,74,6,"value"],[85,11,74,11],[85,13,74,13],[86,8,75,8,"insightsCount"],[86,21,75,21],[87,8,76,8,"criticalCount"],[87,21,76,21],[88,8,77,8,"lowStockCount"],[88,21,77,21],[89,8,78,8,"debtCount"],[89,17,78,17],[90,8,79,8,"refreshInsights"],[90,23,79,23],[91,8,80,8,"loading"],[92,6,81,6],[92,7,81,8],[93,6,81,8,"children"],[93,14,81,8],[93,16,83,7,"children"],[94,4,83,15],[95,6,83,15,"fileName"],[95,14,83,15],[95,16,83,15,"_jsxFileName"],[95,28,83,15],[96,6,83,15,"lineNumber"],[96,16,83,15],[97,6,83,15,"columnNumber"],[97,18,83,15],[98,4,83,15],[98,11,84,30],[98,12,84,31],[99,2,86,0],[99,3,86,1],[100,0,86,2],[100,3]],"functionMap":{"names":["<global>","createContext$argument_0.refreshInsights","useInsights","InsightsProvider","refreshInsights","insights.forEach$argument_0","useEffect$argument_0","<anonymous>"],"mappings":"AAA;mBCiB,cD;2BEI,iCF;yEGE;sCCO;uBCW;ODQ;GDW;YGG;WCK,6BD;GHC;CHgB"},"hasCjsExports":false},"type":"js/module"}]}