{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":91,"index":91}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../utils/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":92},"end":{"line":2,"column":31,"index":123}}],"key":"XoJ+jbKCrEi38eKczMqtlbk+TCk=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/InsightsContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useInsights\", {\n    enumerable: true,\n    get: function () {\n      return useInsights;\n    }\n  });\n  Object.defineProperty(exports, \"InsightsProvider\", {\n    enumerable: true,\n    get: function () {\n      return InsightsProvider;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _utilsApi = require(_dependencyMap[1], \"../utils/api\");\n  var api = _interopDefault(_utilsApi);\n  var _reactJsxDevRuntime = require(_dependencyMap[2], \"react/jsx-dev-runtime\");\n  const InsightsContext = /*#__PURE__*/(0, _react.createContext)({\n    insightsCount: 0,\n    criticalCount: 0,\n    lowStockCount: 0,\n    debtCount: 0,\n    refreshInsights: async () => {},\n    loading: false\n  });\n  const useInsights = () => {\n    _s();\n    return (0, _react.useContext)(InsightsContext);\n  };\n  _s(useInsights, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n  const InsightsProvider = ({\n    children\n  }) => {\n    _s2();\n    const [insightsCount, setInsightsCount] = (0, _react.useState)(0);\n    const [criticalCount, setCriticalCount] = (0, _react.useState)(0);\n    const [lowStockCount, setLowStockCount] = (0, _react.useState)(0);\n    const [debtCount, setDebtCount] = (0, _react.useState)(0);\n    const [loading, setLoading] = (0, _react.useState)(false);\n    const refreshInsights = (0, _react.useCallback)(async () => {\n      try {\n        setLoading(true);\n        const response = await api.default.get('/api/ai/all-insights');\n        const insights = response.data.insights || [];\n\n        // Contar por tipo\n        let critical = 0;\n        let lowStock = 0;\n        let debt = 0;\n        insights.forEach(insight => {\n          if (insight.type === 'critical_stock') {\n            critical++;\n          } else if (insight.type === 'low_stock') {\n            lowStock++;\n          } else if (insight.type === 'overdue_debt') {\n            debt++;\n          }\n        });\n        setCriticalCount(critical);\n        setLowStockCount(lowStock);\n        setDebtCount(debt);\n        setInsightsCount(insights.length);\n      } catch (error) {\n        console.error('Error fetching insights count:', error);\n      } finally {\n        setLoading(false);\n      }\n    }, []);\n\n    // Cargar al montar\n    (0, _react.useEffect)(() => {\n      refreshInsights();\n\n      // Refrescar cada 60 segundos\n      const interval = setInterval(refreshInsights, 60000);\n      return () => clearInterval(interval);\n    }, [refreshInsights]);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(InsightsContext.Provider, {\n      value: {\n        insightsCount,\n        criticalCount,\n        lowStockCount,\n        debtCount,\n        refreshInsights,\n        loading\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }, this);\n  };\n  _s2(InsightsProvider, \"LGrkpCtqO4huDUVHUUBh2npZRxw=\");\n  _c = InsightsProvider;\n  var _c;\n  $RefreshReg$(_c, \"InsightsProvider\");\n});","lineCount":111,"map":[[15,2,22,0,"Object"],[15,8,22,0],[15,9,22,0,"defineProperty"],[15,23,22,0],[15,24,22,0,"exports"],[15,31,22,0],[16,4,22,0,"enumerable"],[16,14,22,0],[17,4,22,0,"get"],[17,7,22,0],[17,18,22,0,"get"],[17,19,22,0],[18,6,22,0],[18,13,22,0,"useInsights"],[18,24,22,0],[19,4,22,0],[20,2,22,0],[21,2,24,0,"Object"],[21,8,24,0],[21,9,24,0,"defineProperty"],[21,23,24,0],[21,24,24,0,"exports"],[21,31,24,0],[22,4,24,0,"enumerable"],[22,14,24,0],[23,4,24,0,"get"],[23,7,24,0],[23,18,24,0,"get"],[23,19,24,0],[24,6,24,0],[24,13,24,0,"InsightsProvider"],[24,29,24,0],[25,4,24,0],[26,2,24,0],[27,2,1,0],[27,6,1,0,"_react"],[27,12,1,0],[27,15,1,0,"require"],[27,22,1,0],[27,23,1,0,"_dependencyMap"],[27,37,1,0],[28,2,2,0],[28,6,2,0,"_utilsApi"],[28,15,2,0],[28,18,2,0,"require"],[28,25,2,0],[28,26,2,0,"_dependencyMap"],[28,40,2,0],[29,2,2,0],[29,6,2,0,"api"],[29,9,2,0],[29,12,2,0,"_interopDefault"],[29,27,2,0],[29,28,2,0,"_utilsApi"],[29,37,2,0],[30,2,2,31],[30,6,2,31,"_reactJsxDevRuntime"],[30,25,2,31],[30,28,2,31,"require"],[30,35,2,31],[30,36,2,31,"_dependencyMap"],[30,50,2,31],[31,2,13,0],[31,8,13,6,"InsightsContext"],[31,23,13,21],[31,39,13,24],[31,43,13,24,"createContext"],[31,49,13,37],[31,50,13,37,"createContext"],[31,63,13,37],[31,65,13,59],[32,4,14,2,"insightsCount"],[32,17,14,15],[32,19,14,17],[32,20,14,18],[33,4,15,2,"criticalCount"],[33,17,15,15],[33,19,15,17],[33,20,15,18],[34,4,16,2,"lowStockCount"],[34,17,16,15],[34,19,16,17],[34,20,16,18],[35,4,17,2,"debtCount"],[35,13,17,11],[35,15,17,13],[35,16,17,14],[36,4,18,2,"refreshInsights"],[36,19,18,17],[36,21,18,19],[36,27,18,19,"refreshInsights"],[36,28,18,19],[36,33,18,31],[36,34,18,32],[36,35,18,33],[37,4,19,2,"loading"],[37,11,19,9],[37,13,19,11],[38,2,20,0],[38,3,20,1],[38,4,20,2],[39,2,22,7],[39,8,22,13,"useInsights"],[39,19,22,24],[39,22,22,27,"useInsights"],[39,23,22,27],[40,4,22,27,"_s"],[40,6,22,27],[41,4,22,27],[41,11,22,33],[41,15,22,33,"useContext"],[41,21,22,43],[41,22,22,43,"useContext"],[41,32,22,43],[41,34,22,44,"InsightsContext"],[41,49,22,59],[41,50,22,60],[42,2,22,60],[43,2,22,61,"_s"],[43,4,22,61],[43,5,22,13,"useInsights"],[43,16,22,24],[44,2,24,7],[44,8,24,13,"InsightsProvider"],[44,24,24,70],[44,27,24,73,"InsightsProvider"],[44,28,24,74],[45,4,24,76,"children"],[46,2,24,85],[46,3,24,86],[46,8,24,91],[47,4,24,91,"_s2"],[47,7,24,91],[48,4,25,2],[48,10,25,8],[48,11,25,9,"insightsCount"],[48,24,25,22],[48,26,25,24,"setInsightsCount"],[48,42,25,40],[48,43,25,41],[48,46,25,44],[48,50,25,44,"useState"],[48,56,25,52],[48,57,25,52,"useState"],[48,65,25,52],[48,67,25,53],[48,68,25,54],[48,69,25,55],[49,4,26,2],[49,10,26,8],[49,11,26,9,"criticalCount"],[49,24,26,22],[49,26,26,24,"setCriticalCount"],[49,42,26,40],[49,43,26,41],[49,46,26,44],[49,50,26,44,"useState"],[49,56,26,52],[49,57,26,52,"useState"],[49,65,26,52],[49,67,26,53],[49,68,26,54],[49,69,26,55],[50,4,27,2],[50,10,27,8],[50,11,27,9,"lowStockCount"],[50,24,27,22],[50,26,27,24,"setLowStockCount"],[50,42,27,40],[50,43,27,41],[50,46,27,44],[50,50,27,44,"useState"],[50,56,27,52],[50,57,27,52,"useState"],[50,65,27,52],[50,67,27,53],[50,68,27,54],[50,69,27,55],[51,4,28,2],[51,10,28,8],[51,11,28,9,"debtCount"],[51,20,28,18],[51,22,28,20,"setDebtCount"],[51,34,28,32],[51,35,28,33],[51,38,28,36],[51,42,28,36,"useState"],[51,48,28,44],[51,49,28,44,"useState"],[51,57,28,44],[51,59,28,45],[51,60,28,46],[51,61,28,47],[52,4,29,2],[52,10,29,8],[52,11,29,9,"loading"],[52,18,29,16],[52,20,29,18,"setLoading"],[52,30,29,28],[52,31,29,29],[52,34,29,32],[52,38,29,32,"useState"],[52,44,29,40],[52,45,29,40,"useState"],[52,53,29,40],[52,55,29,41],[52,60,29,46],[52,61,29,47],[53,4,31,2],[53,10,31,8,"refreshInsights"],[53,25,31,23],[53,28,31,26],[53,32,31,26,"useCallback"],[53,38,31,37],[53,39,31,37,"useCallback"],[53,50,31,37],[53,52,31,38],[53,64,31,50],[54,6,32,4],[54,10,32,8],[55,8,33,6,"setLoading"],[55,18,33,16],[55,19,33,17],[55,23,33,21],[55,24,33,22],[56,8,34,6],[56,14,34,12,"response"],[56,22,34,20],[56,25,34,23],[56,31,34,29,"api"],[56,34,34,32],[56,35,34,32,"default"],[56,42,34,32],[56,43,34,33,"get"],[56,46,34,36],[56,47,34,37],[56,69,34,59],[56,70,34,60],[57,8,35,6],[57,14,35,12,"insights"],[57,22,35,20],[57,25,35,23,"response"],[57,33,35,31],[57,34,35,32,"data"],[57,38,35,36],[57,39,35,37,"insights"],[57,47,35,45],[57,51,35,49],[57,53,35,51],[59,8,37,6],[60,8,38,6],[60,12,38,10,"critical"],[60,20,38,18],[60,23,38,21],[60,24,38,22],[61,8,39,6],[61,12,39,10,"lowStock"],[61,20,39,18],[61,23,39,21],[61,24,39,22],[62,8,40,6],[62,12,40,10,"debt"],[62,16,40,14],[62,19,40,17],[62,20,40,18],[63,8,42,6,"insights"],[63,16,42,14],[63,17,42,15,"forEach"],[63,24,42,22],[63,25,42,24,"insight"],[63,32,42,36],[63,36,42,41],[64,10,43,8],[64,14,43,12,"insight"],[64,21,43,19],[64,22,43,20,"type"],[64,26,43,24],[64,31,43,29],[64,47,43,45],[64,49,43,47],[65,12,44,10,"critical"],[65,20,44,18],[65,22,44,20],[66,10,45,8],[66,11,45,9],[66,17,45,15],[66,21,45,19,"insight"],[66,28,45,26],[66,29,45,27,"type"],[66,33,45,31],[66,38,45,36],[66,49,45,47],[66,51,45,49],[67,12,46,10,"lowStock"],[67,20,46,18],[67,22,46,20],[68,10,47,8],[68,11,47,9],[68,17,47,15],[68,21,47,19,"insight"],[68,28,47,26],[68,29,47,27,"type"],[68,33,47,31],[68,38,47,36],[68,52,47,50],[68,54,47,52],[69,12,48,10,"debt"],[69,16,48,14],[69,18,48,16],[70,10,49,8],[71,8,50,6],[71,9,50,7],[71,10,50,8],[72,8,52,6,"setCriticalCount"],[72,24,52,22],[72,25,52,23,"critical"],[72,33,52,31],[72,34,52,32],[73,8,53,6,"setLowStockCount"],[73,24,53,22],[73,25,53,23,"lowStock"],[73,33,53,31],[73,34,53,32],[74,8,54,6,"setDebtCount"],[74,20,54,18],[74,21,54,19,"debt"],[74,25,54,23],[74,26,54,24],[75,8,55,6,"setInsightsCount"],[75,24,55,22],[75,25,55,23,"insights"],[75,33,55,31],[75,34,55,32,"length"],[75,40,55,38],[75,41,55,39],[76,6,56,4],[76,7,56,5],[76,8,56,6],[76,15,56,13,"error"],[76,20,56,18],[76,22,56,20],[77,8,57,6,"console"],[77,15,57,13],[77,16,57,14,"error"],[77,21,57,19],[77,22,57,20],[77,54,57,52],[77,56,57,54,"error"],[77,61,57,59],[77,62,57,60],[78,6,58,4],[78,7,58,5],[78,16,58,14],[79,8,59,6,"setLoading"],[79,18,59,16],[79,19,59,17],[79,24,59,22],[79,25,59,23],[80,6,60,4],[81,4,61,2],[81,5,61,3],[81,7,61,5],[81,9,61,7],[81,10,61,8],[83,4,63,2],[84,4,64,2],[84,8,64,2,"useEffect"],[84,14,64,11],[84,15,64,11,"useEffect"],[84,24,64,11],[84,26,64,12],[84,32,64,18],[85,6,65,4,"refreshInsights"],[85,21,65,19],[85,22,65,20],[85,23,65,21],[87,6,67,4],[88,6,68,4],[88,12,68,10,"interval"],[88,20,68,18],[88,23,68,21,"setInterval"],[88,34,68,32],[88,35,68,33,"refreshInsights"],[88,50,68,48],[88,52,68,50],[88,57,68,55],[88,58,68,56],[89,6,69,4],[89,13,69,11],[89,19,69,17,"clearInterval"],[89,32,69,30],[89,33,69,31,"interval"],[89,41,69,39],[89,42,69,40],[90,4,70,2],[90,5,70,3],[90,7,70,5],[90,8,70,6,"refreshInsights"],[90,23,70,21],[90,24,70,22],[90,25,70,23],[91,4,72,2],[91,24,73,4],[91,28,73,4,"_reactJsxDevRuntime"],[91,47,73,4],[91,48,73,4,"jsxDEV"],[91,54,73,4],[91,56,73,5,"InsightsContext"],[91,71,73,20],[91,72,73,21,"Provider"],[91,80,73,29],[92,6,74,6,"value"],[92,11,74,11],[92,13,74,13],[93,8,75,8,"insightsCount"],[93,21,75,21],[94,8,76,8,"criticalCount"],[94,21,76,21],[95,8,77,8,"lowStockCount"],[95,21,77,21],[96,8,78,8,"debtCount"],[96,17,78,17],[97,8,79,8,"refreshInsights"],[97,23,79,23],[98,8,80,8,"loading"],[99,6,81,6],[99,7,81,8],[100,6,81,8,"children"],[100,14,81,8],[100,16,83,7,"children"],[101,4,83,15],[102,6,83,15,"fileName"],[102,14,83,15],[102,16,83,15,"_jsxFileName"],[102,28,83,15],[103,6,83,15,"lineNumber"],[103,16,83,15],[104,6,83,15,"columnNumber"],[104,18,83,15],[105,4,83,15],[105,11,84,30],[105,12,84,31],[106,2,86,0],[106,3,86,1],[107,2,86,2,"_s2"],[107,5,86,2],[107,6,24,13,"InsightsProvider"],[107,22,24,70],[108,2,24,70,"_c"],[108,4,24,70],[108,7,24,13,"InsightsProvider"],[108,23,24,70],[109,2,24,70],[109,6,24,70,"_c"],[109,8,24,70],[110,2,24,70,"$RefreshReg$"],[110,14,24,70],[110,15,24,70,"_c"],[110,17,24,70],[111,0,24,70],[111,3]],"functionMap":{"names":["<global>","createContext$argument_0.refreshInsights","useInsights","InsightsProvider","refreshInsights","insights.forEach$argument_0","useEffect$argument_0","<anonymous>"],"mappings":"AAA;mBCiB,cD;2BEI,iCF;yEGE;sCCO;uBCW;ODQ;GDW;YGG;WCK,6BD;GHC;CHgB"},"hasCjsExports":false},"type":"js/module"}]}